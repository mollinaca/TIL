# ハードウェア

## 3-01 コンピュータの5大装置

コンピュータは、制御装置、演算装置、記憶装置、入力装置、出力装置の5つの装置から構成される。このうち、制御・演算の二つをあわせて中央処理装置（CPU)と呼ぶ。

* CPU
  * 制御装置：記憶装置からプログラムの命令を取り出して解読し、それぞれの装置に指示を与える
  * 演算装置：四則演算や比較判断などデータの処理や加工を行う
* 記憶装置：データやプログラムを記憶する
* 入力装置：コンピュータの外部からプログラムやデータを読み込む
* 出力装置：コンピュータの内部で処理されたデータを外部へ書き出す

5大装置ときたら、**制御装置、演算装置、記憶装置、入力装置、出力装置**


## 3-02 CPU

CPUは制御装置と演算装置の二つで構成される。  

* 制御装置：記憶装置からプログラムの命令を取り出して解読し、それぞれの装置に指示を与える
* 演算装置：四則演算や比較判断などデータの処理や加工を行う。ALU:Arithmetic and Logic Unit)

**レジスタ**  
CPUの中には、レジスタという高速な記憶装置が搭載されている。

* 命令レジスタ  
  主記憶から取り出された命令を格納する
* 命令アドレスレジスタ  
  実行すべき命令のアドレスを保持する。プログラムカウンタともいう。
* インデックスレジスタ  
  アドレス指定に用いる。指標レジスタともいう。
* ベースレジスタ  
  アドレス指定に用いる。基底レジスタともいう。
* アキュムレータ
  被演算数と演算結果を一時的に保持する。累算器ともいう。
* 汎用レジスタ  
  特定の機能に限定せず、多目的に使用される。

**クロック周波数**  
コンピュータ内部で一定間隔で電圧が規則的に「高」「低」を繰り返す信号が生成される。  
このサイクルを1秒間に何回繰り返されるかをクロック周波数という。  
単位として GHz(1秒間に10^9回)などが用いられる。  
クロック周波数が高いほど、命令実行速度は向上し、処理速度も向上する。


## 3-03 アドレス指定

**命令語**  
命令語は、命令部とアドレス部（オペランド部）で構成される。  
命令の種類によっては、アドレスがないものや、複数あるものもある。  

**命令実行サイクル**  
CPUは主記憶（メインメモリ）に格納されている命令を読みだして解読し、他の装置に指示を出す制御装置と、データに対する四則演算や論理演算などを行う演算装置からなる。  
命令の読み出しから実行終了までの流れは以下のようになる。

1. 命令フェッチ（命令取り出し）  
  命令アドレスレジスタで示されたアドレスの命令が、命令レジスタに取り出される。

2. 命令の解読  
  解読器（デコーダ）により解読され、演算命令であれば演算装置に指示を出す。  

3. 実行アドレス計算  
  命令のアドレス部はアドレスレジスタに送られる。
  アドレスレジスタは、実行に必要なデータが入っているアドレスや、実行結果を格納するアドレスを計算して、主記憶装置に指示する。

4. オペランド読み出し  
  演算の対象となるアドレスのデータが演算装置に送られる。

5. 命令の実行  
  演算装置で計算が実行される。

6. 演算結果格納  
  計算結果が、再び主記憶に格納される。

命令サイクル ： 命令フェッチ→命令の解読→実行アドレス計算→オペランド読み出し→命令の実行→結果の格納

**アドレス指定**  
アドレス指定は、アドレス修飾ともいう。

* 即値アドレス指定  
  命令のアドレス部にデータそのものを格納している。

* 直接アドレス指定（絶対アドレス指定）  
  命令のアドレス部の値を実行アドレスとする。

* 間接アドレス指定  
  命令のアドレス部に実行アドレスを格納している。間接参照。

* 相対アドレス  
  命令のアドレス部の値と命令アドレスレジスタ（プログラムカウンタ）の値を加算し、実行アドレスとする。

* インデックスアドレス指定（指標アドレス指定）  
  命令のアドレス部の値とインデックスレジスタの値を加算し、実行アドレスとする。

* ベースアドレス指定（基底アドレス指定）  
  ベースアドレス指定は、命令のアドレス部の値とベースレジスタの値を加算し、実行アドレスとする。

## 3-04 CPUの高速化

**逐次制御方式**  
命令実行を、実行サイクル多いんいで1命令ずつ順番に繰り返す方式

**パイプライン処理**  
命令実行サイクルの各段階（ステージ）を並行して実行することで、処理効率を向上させる方式。  
パイプライン処理では、分岐命令が合わられるとそれまで先読みしていた命令を破棄し、新たに分岐先の命令を実行しなければならない。処理の順番が乱れることをパイプラインハザードという。  
分岐命令に対処するためには、分岐するかどうかを予測して、実行される確率の高いほうを先読みするなどの分岐予測という技術が使われる。

**スーパーパイプライン**  
各ステージをさらに細かく分割することで、パイプラインの動作の効率を向上させる方式。

**スーパースカラ**  
複数のパイプラインを設けることで、複数の命令を同時に実行する方式。

**マルチコアプロセッサ**  
1つのCPUに複数のコアを備えたもの。  
シングルコアに比べ、消費電力を抑えながら処理速度の向上を図ることができる。  
コアが二つのものをデュアルコア、4つのものをクアッドコアといい、それ以上のものも存在する。  

## 3-05 記憶素子

**RAM**  
Random Access Memory  
読み書き可能

| - | 回路 | リフレッシュ | 速度 | 集積度 | 価格 | 用途 |
|-|-|-|-|-|-|-|
| DRAM | コンデンサ | 必要 | 低速 | 高い | 安価 | 主記憶装置 |
| SRAM | フリップフロップ回路 | 不要 | 高速 | 低い | 高価 | キャッシュメモリ |


**ROM**  
Read Only Memory  
読み出し限定  

* マスクROM  
  製造時に書き込み、ユーザは書き込み不可

* EPROM  
  紫外線照射で全消去が可能

* EEPROM  
  電圧をかけて部分消去が可能

* フラッシュメモリ  
  電圧をかけて全消去、または部分消去が可能  
  書き換えは、ブロック単位で消去後に書き込み  

**キャッシュメモリ** ： CPUと主記憶装置の間に入り、高速化を図る  
1次キャッシュ、2次キャッシュ → 主記憶装置のアクセス時間とCPUの処理時間のギャップが大きい場合、1次、2次とキャッシュメモリを多段構成にする

**ライトスルー方式とライトバック方式**  

* ライトスルー  
  書き込み時に、キャッシュメモリと主記憶の両方を書き換える。高速化の恩恵はないが制御は簡単

* ライトバック  
  キャッシュメモリだけ書き換えて、主記憶はブロックの入れ替え時に行う。高速化するが制御が難しい

**実行アクセス時間**  
アクセスしたデータがキャッシュに存在する（した）確率をヒット率という。  
(キャッシュメモリのアクセス時間 * ヒット率) + (主記憶のアクセス時間 * (1-ヒット率)) = 実行アクセス時間

**ディスクキャッシュ**  
主記憶装置と磁気ディスクの間に配置し、高速化を図る。

**記憶装置のアクセス速度**  
レジスタ → キャッシュメモリ → 主記憶装置 → ディスクキャッシュ → ハードディスク  
れきしではやい

**メモリインタリーブ**
主記憶をいくつかの区画（バンク）に分割して同時アクセス（並列化）を行い、高速化を図る。

## 3-06 磁気ディスク装置

**磁気ディスク**  
磁性体を塗った円盤ディスクにデータを記録し、磁気ヘッドを移動させながらデータを読み書きする装置。　　
Hard Disk Drive  

**セクタ方式**

* セクタ  
  データを記録する最小単位

* トラック
  セクタが集まって同心円状のトラックになる

* シリンダ
  トラックが複数あつまり、1面がシリンダになる
  シリンダは物理的な構造ではなく、論理的な概念

**アクセス時間**  
位置決め（シーク）時間 + 回転待ち（サーチ）時間 + データ転送時間

**フラグメンテーション**  
磁気ディスクを長期間使うことで、まとまった領域がなくなり、一つのファイルがばらばらに記録されるようになる。  
この状況をフラグメンテーション（断片化）という。  
アクセス速度が遅くなる。

## 3-07 補助記憶装置

CPUが直接読み書きできるのは主記憶装置上にあるプログラムやデータのみだが、  
主記憶装置は小容量で、電源が切れると記憶内容が消える（揮発性）。  
この主記憶装置を補うという意味で、**補助記憶装置**がある。  
主記憶に比べてアクセス速度は遅いが、大容量で安価で、不揮発性という特徴がある。  
前節の磁気ディスクは補助記憶装置の一種。

**光ディスク**  
レーザ光線で読み出し、書き込みを行う。
CD(Compact Disk), DVD(Digital Versatile Disk)がある。

* CD-ROM : Readonly、再生専用
* CD-R : Recordable、一度だけ書き込み可能、追記型
* CD-RW : ReWritable、何度でも書き換え可能

**BD(Blu-ray Disk)**
青紫色のレーザ光線

* BD-ROM
* BD-R
* BR-RW 

**光磁気ディスク(MO Magneto Optical Disk)**  
データの書き込みはレーザ光線と磁気、データの読み出しにレーザ光線を利用する

**DAT(Digital Audito Tape)**
カセット型の磁気テープ。  
大容量で安価のため、バックアップ用媒体としてよく使われる。

**フラッシュメモリ**  
USBメモリやSDメモリカードなど。  
電気的に消去して書き直せる

**SSD(Solid State Drive)**
フラッシュメモリを用いた記憶媒体で、ハードディスクの代わりとして期待されている。  
シークがないため静音で振動や衝撃に強く、消費電力が小さく、アクセス速度も速い。  
ただし、ビット当たりの単価が高く、書き込み回数の上限がある。

## 3-08 入力装置

キーボードやマウス。  
マウスのように位置や座標を入力するものを、**ポインティングデバイス**という。  
トラックボール、トラックパッド、ジョイスティック、タッチパネル、ディジタイザ/タブレットなど  

その他の入力装置として、

* イメージスキャナ
  絵や写真、図形などを光学的に読み取る。

* バーコードリーダ
  商品などに印刷された帯状のマークを読み取る装置

* OCR
  手書き文字を読み取る装置
  Optical Character Reader

* OMR
  鉛筆などの筆記用具で記入されたマークを読み取る装置
  Optical Mark Reader

* 磁気カード読み取り装置
  カード上の磁気ストライプを読み取る装置

* ディジタルカメラ
  光を電気信号に変換する装置CCD（Charge Coupled Device:電荷結合素子）などを使って、画像をデジタルデータに変換する装置

**バーコード**
JAN(Japanese Article Number)コードというバーコードが日本では一般的に利用されている。  
13桁と8桁タイプがある
QRコードは2次元バーコードで、エラー訂正機能を持つ


**RFID(Radio Frequency IDenticfication)**
極小の集積回路にアンテナを組み合わせた電子荷札  
電磁波を用いて情報を非接触で読み取る。電車の定期券（Suicaなど）や図書館の自動貸し出し機などで使われる。  

## 3-09 出力装置

**ディスプレイ**  

* 液晶ディスプレイ
  光の透過を画素ごとに制御し、カラーフィルタを用いて色を表現する  
  液晶自体は発光しないので、バックライト又は外部の光を取り込む仕組みが必要  
  消費電力が小さい反面、視野角が狭く、応答速度が遅い  
  現在では、比較的応答速度が速いTFT液晶ディスプレイが主流

* 有機ELディスプレイ
  電極の間に電気を通すと発光する特殊な有機化合物を挟んだ構造になっている
  自ら発行しバックライトが不要なため薄型にでき、低電圧駆動、低消費電力

* PDP(PぁsマDisplay Panel)  
  プラズマディスプレイ  
  放電によって発生する紫外線と蛍光体を利用する  
  コントラストが高く、視野角が広く、大型化が可能

ディスプレイの解像度 → 縦横のドット数で表す。ドット数が高いほど解像度が高く、きめ細かい。

**VRAM**  
VRAM(Video RAM、グラフィックスメモリ）は、ディスプレイに表示される内容を一時的に記録するために使用される専用メモリ  
ディスプレイに表現できる解像度や色数は、VRAMの容量によってきまる。

| 1ドットあたりに必要なビット数 | 色数 |
|-|-|
| 1ビット | 2色(2^1) |
| 8ビット | 256色(2^8) |
| 16ビット | 65,536色(2^16) |
| 24ビット | 16,777,216色(2^24) |
24ビットをフルカラーともいう。

**プリンタ**

* ドットインパクトプリンタ  
  印字ヘッドの多数のピンでインクリボンに衝撃（インパクト）を与えることによって印刷する

* インクジェットプリンタ  
  印字ヘッドのノズルからインクを吹き付けることによって印刷する

* レーザプリンタ  
  コピー機と同じ原理で、光電導物質を表面に塗布した感光ドラムにレーザ光をあてて像を作り、  
  ドラムに付着したトナー神に転写して印刷する

## 3-10 入出力インタフェース

コンピュータに入出力するための企画やデータ転送の仕様を、入出力インタフェースという。  
１ビットずつ直列に転送するシリアルインタフェースと、複数のビットを並列に転送するパラレルインタフェースがあり、パラのほうが高速だったが、最近はシリアルに１ビットずつ転送してから複数ビットを組み立てるほうが確実に高速でできるため主流。  
USB、IEEE1394、シリアルATAなど。  

**USB**
コンピュータと周辺装置を接続する標準的なインタフェイス
USB1.1, USB2.0, USB3.0 と進化している
Universal Serial Bus

**IEEE1394**
音声や映像などのリアルタイム性の必要なデータ転送に適した高速な転送方式。  
ハブを用いて最大63台までの機器を接続できる。

**シリアルATA**
PCと周辺機器を接続するATA仕様をシリアル転送方式に変更したもの。  
内臓の磁気ディスクや光ディスクドライブなどの接続に採用される。  

**HDMI**
映像、音声、制御信号を1本のケーブルで入出力できる。  
PC、デジカメ、スマートフォンなどの映像・音声をTVに出力したりできる。  

**IrDA**
赤外線を使う。  
ノートPCや携帯電話でのデータ交換、プリンタへの印刷データ転送など。  

**Bluetooth**
2.4GHz帯の電波を利用し、半径10mの範囲で1Mbps程度までの通信ができる無線技術。  
指向性なく通信でき、ノートPCや携帯情報端末、携帯電話でのデータ交換などに使われる。